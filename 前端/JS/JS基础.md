## var

> 变量提升：js引擎自动将声明提升到顶部
>
> ```js
> // 变量提升
> // var test
> console.log(test) // undefined
> // 赋值还是发生在原来的地方
> var test = 'hello'
> ```

1. 作用域：全局/函数作用域
2. var允许重新声明
3. 支持变量提升，同时被初始化为undefined，会出现*先使用再定义*的情况，但是赋值不会被提升！
4. var会初始化为undefined
5. 一种老旧的模仿块级作用域的方法：立即调用函数表达式IIFE，遇到再了解即可

## let & const

1. 作用域：块级
2. 支持变量提升，但是提升时不会被初始化为undefined
3. 声明的变量为块级作用域
4. 不允许重新声明
5. let允许更新变量的值，const不允许

## 表达式

可以被计算，最终是一个值

### 原始表达式

表达式的**最小单位**，包含常量/直接量/关键字/变量

```js
// 常量原始表达式
1
"hello"
/pattern/
// 关键字原始表达式
true
null
this
// 变量原始表达式
i
undefined
```

### 其他表达式

1. 对象/数组初始化表达式
2. 属性访问表达式
3. 函数定义表达式
4. 调用表达式
5. 对象创建表达式

对象和数组的初始化表达式， 也叫对象直接量，数组直接量
值：数组/对象

```js
[]
[1,2+3,4]
[1, , , , 5] // undefined填充
// 对象初始化表达式
{}
{x: 2, y: 3}
```

函数定义表达式，也叫函数直接量
值：新定义的函数

```js
function(){}
```

> 函数定义表达式同样可以包含函数的名字。函数也可以通过函数语句来定义，而不是函数表达式。

属性访问表达式
值：对象属性的值/数组元素的值

```js
expression.id
// exp2: 属性名称或者数组索引
expression1[expression2]
```

> 1. 计算.和[]之前的表达式，如果结果为null/undefined,则抛出类型错误异常
> 2. 如果结果不是对象/数组，先转换
> 3. []内的值计算后转换为字符串，如果属性不存在，值为undefined

> [!tip]
>
> 一般，数组只能用[]，对象可以用.或[]
> 对于特殊的属性名称，有不得不使用[]的理由：
>
> 1. 保留字
> 2. 包含空格和标点
> 3. 数字(对于数组)

对象创建表达式，创建对象并调用构造函数

```js
new Object()
new Object
new Point(2,2)
new Date
```

> [!tip]
>
> 没有参数传递给构造函数，可以省略()

**todo**当计算一个对象创建表达式的值时，和对象初始化表达式通过{}创建对象的做法一样，JavaScript首先创建一个新的空对象，然后，JavaScript通过传入指定的参数并将这个新对象当做this的值来调用一个指定的函数。这个函数可以使用this来初始化这个新创建对象的属性。那些被当成构造函数的函数不会返回一个值，并且这个新创建并被初始化后的对象就是整个对象创建表达式的值。如果一个构造函数确实返回了一个对象值，那么这个对象就作为整个对象创建表达式的值，而新创建的对象就废弃了。

构造函数的细节将在第9章讲述。

(函数/方法)调用表达式
值：函数体返回的值/undefined

```js
func(0)
// 方法调用
Math.max(x,y,z)
a.sort()
```

> 1. 计算函数表达式
> 2. 计算参数表达式
> 3. 函数表达式的值不可调用，抛出类型错误异常
> 4. 实参的值 传递给 形参
> 5. 执行函数体，返回值返回给调用表达式的值
> 6. 没有返回值，值为undefind

**todo**在方法调用中，执行函数体的时候，作为属性访问主题的对象和数组便是其调用方法内this的指向。这种特性使得在面向对象编程范例中，函数（其OO名称为“方法”）可以调用其宿主对象。参照第9章以获取更相信的信息。并不是方法调用的调用表达式通常使用全局对象作为this关键字的值。然而在ECMAScript 5中，那些通过严格模式定义的函数在调用时将使用undefined作为this的值，this不会指向全局对象。参照5.7.3节以获得更多关于严格模式的信息。

## 运算符

### 数字运算

```js
// 2.5
(1+4)/2
Math.floor((1+4)/2)
```

### 运算符短路规则

&&

1. 第一个操作数是真值，返回第二个操作数的值
2. 第一个操作数是假值，返回第一个操作数的值
3. 换句话说，&&表达式为假，返回第一个操作数，为真，返回第二个操作数

||

1. 第一个操作数是真值，返回第一个操作数
2. 第一个操作数是假值，返回第二个操作数
3. 和&&正好相反

推广到n个操作数：

&&：从左往右返回第一个假值，没有就返回最后一个

||：从左往右返回第一个真值，没有就返回最后一个

### 空值合并运算符??

为null或undefined的未定义值提供默认值

```js
a ?? b // if a is null or undefined, a = b
```

> [!caution]
>
> 禁止将?? 和&&和||一起使用，除非括号明确指定优先级

### delete

 不能被删除的值

1. var/let/const
2. 不可配置的
   1. undefined
   2. Infinity
   3. NaN

delete语法协议，语法本质

1. 值/字面量/不可达的引用，不操作，直接返回true

2. 引用类型，删除引用

> [!caution]
>
> 严格模式会有报错
>
> 1. SyntaxError：删除变量/函数名/函数参数
> 2. TypeError：configurable：false
> 3. ReferenceError: delete super.property

## value

### falsy

转换为boolean时被转为false

1. false
2. null
3. undefined
4. 0/-0/0n
5. NaN
6. ""
7. document.all

### truthy

除了falsy都是truthy

## 数组

```js
let arr = []
let arr = [1, 2, 3]
let arr = new Array[]
```

| 属性/方法     | 作用                       |     |
| ------------- | -------------------------- | --- |
| length        |                            |     |
| at            | []增强版，可以出现负数索引 |     |
| push/pop      | 尾部增删                   |     |
| unshift/shift | 头部增删，同时其他元素前移 |     |
|               |                            |     |
