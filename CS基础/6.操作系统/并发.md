## 死锁

> 死锁：各进程互相等待对方手里的资源，导致各进程阻塞
> 至少有2个及以上进程同时发生阻塞
>
> 饥饿：可能只有一个进程发生饥饿，可能是阻塞态，也可能是就绪态
>
> 产生死锁的4个条件：
>
> 1. 互斥条件，只有对互斥使用的资源的争抢会导致死锁
> 2. 请求和保持，进程已经保持了至少一个资源，又提出了另外已经被占用的新资源请求，此时请求进程阻塞，对已经占有的资源保持不放
> 3. 循环等待条件，存在进程资源的循环等待链（链中的每个进程已占用的资源被下一个进程请求）死锁一定有循环等待，循环等待未必死锁
> 4. 不剥夺条件：进程所获得的资源不能被其他进程抢占

处理死锁（静态预防或者动态避免）：

1. 预防1：破坏死锁的必要条件
   1. 破坏互斥，将只能互斥使用的资源改造为可共享使用，例如SPOOLing 
   2. 破坏请求和保持
   3. 破坏循环等待
   4. 破坏不剥夺，新的资源请求不满足就释放保持的资源
      实现复杂， 反复释放申请增加系统开销，会导致进程饥饿，主动释放可能造成工作失效，适用于易保存恢复的资源
2. 预防2：防止系统进入不安全状态，例如银行家算法
3. 检测和解除

