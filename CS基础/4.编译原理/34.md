## 正则表达式RE

用正则表达式写`.g4`文件，描述词法单元
手写词法分析器，模拟状态转移图，即自动机

最小化处理

字符串-字符-字母表
Definition 字母表

串上的连接操作
指数操作



语言：给定字母表上，一个任意的串集合

id: { a,b,c,a1,.....}
ws: { blank, tab, newline }
if: { if }

集合操作构造成新的语言

![image-20240319160516201](./images/image-20240319160516201.png)

正则表达式是**语法**，正则语言是**语义**

![image-20240319160836794](./images/image-20240319160836794.png)

![image-20240319161251838](./images/image-20240319161251838.png)

![image-20240319161502741](./images/image-20240319161502741.png)

### 符号

| 表达式 | 匹配                             | 例子          |
| ------ | -------------------------------- | ------------- |
| c      | 单个非运算符字符                 | a             |
| \c     | 字符c的字面量(转义)              | \*            |
| "s"    | s的字面量                        | "**"          |
| .      | 除换行符以外的，也可能是任何字符 |               |
| [s]    | 字符串s中的任意一个字符          | [abc]={a,b,c} |
| [^s]   | 不在s中的任意一个字符            |               |
| r*     | 零或多个r连接成的串              | a*            |
| r+     | 一或多个r连接成的串              | a+            |
| r?     | 零个或一个r                      |               |
| r{m,n} | m个到n个r的重复出现              |               |
| r1r2   | r1后面加上r2                     | ab            |
| r1\|r2 | r1或者r2                         | a\|b          |
| (r)    |                                  |               |
| r1/r2  | 后面跟有r2的r1                   | 字符/串       |
|        |                                  |               |

| Vim  | Java      | ASCII          | Desc   |
| ---- | --------- | -------------- | ------ |
| \w   | \w        | [a-zA-Z0-9_]   |        |
| \W   | \W        | [^a-zA-Z0-9_]  |        |
| \d   | \d        | [0-9]          |        |
| \D   | \D        | [^0-9]         |        |
| \\_s | \s        | [ \t\r\n\v\f]  | 空白符 |
| \S   | \S        | [^ \t\r\n\v\f] |        |
| \u   | \p{Upper} | [A-Z]          |        |
|      |           |                |        |
|      |           |                |        |

## 非确定性有穷状态自动机NFA

非确定性：一个状态下同一个字符可以进入多个状态

> 更容易描述语言$L(A)$

![image-20240325085012962](./images/image-20240325085012962.png)

唯一初始状态S~0~：如果有多个初始状态，可以另加一个唯一初始状态用？连接多个初始状态
状态转移函数
接受状态集合(双圈)

![image-20240325085459734](./images/image-20240325085459734.png)



## 有穷自动机DFA

![image-20240325091039833](./images/image-20240325091039833.png)

 字母表

> 更容易产生词法分析器

## 正则表达式->自动机 算法

### RE->NFA



性质：

开始状态和接收状态均唯一

### NFA->DFA

子集构造法：Subset/Powerset Construction



