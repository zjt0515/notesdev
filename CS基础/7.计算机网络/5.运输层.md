## 概述

通信真正实体：端主机中的进程

运输层协议（端到端协议

运输层使用不同端口对应不同进程，网络层及其下层传输应用层报文，接收方运输层通过不同端口将报文交付给应用层的进程

运输层直接为应用进程间的逻辑通信提供服务，向高层用户屏蔽了下面网络核心的细节

![image-20240911150342766](./images/image-20240911150342766.png)

## 端口、复用和分用

不同操作系统使用不同格式的进程标识符

16比特表示，

范围：0-65535

- 熟知端口号：0-1023
    - ftp：20/21
    - http：80
    - dns：53
- 登记端口号：1024-49151
- 短暂端口号：49152-65535

端口号只有本地意义

![image-20240911151003113](./images/image-20240911151003113.png)

### TCP/IP应用层常用协议

在运输层使用upd协议

- RIP：520
- DNS：53
- TFTP：
- SNMP：
- DHCP：

在运输层使用tcp协议

SMTP：25	

FTP：21/20

BGP：179

HTTP：80

HTTPS：443  

网络层都是用IP协议，
IP数据包首部协议字段的值：表示数据载荷部分封装的是什么数据单元
17：UPD
6：TCP

​    

### 示例

## TCPUDP对比

### UDP

无连接：随时发送数据

支持单播、多播、广播（111多1全



### TCP

数据传输前，必须使用三报文握手建立连接

数据传输后，使用四报文挥手释放连接

仅支持单播

> 数据块看作字节流，存储在发送缓存，根据发送策略提取字节构建TCP报文段发送
>
> 接收，取出数据载荷部分存储在接收缓存，将其中一些字节交付进程
>
> TCP面向字节流，  

## TCP

### TCP流量控制

数据传输速度更快，导致接收方来不及接收，导致数据丢失，此时需要流量控制

滑动窗口机制





### TCP拥塞控制

### TCP超时重传

### TCP可靠传输

### TCP运输连接管理

### TCP报文段首部格式

