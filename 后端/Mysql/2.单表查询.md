### DDL2

添加字段 `alter table 表名 add 字段名 类型 [约束] [comment 注释];`

删除字段 `alter table 表名 drop column 字段名;`

修改字段数据类型 `alter table 表名 modify 字段名 新数据类型;`

修改字段名和字段类型 `alter table 表名 change 旧字段名 新字段名 类型 [comment 注释] [约束];`

 


```sql
create table 表名(
	字段1 字段类型 [约束] [comment '注释'],
)[comment '注释']

create table tb_user(
    id int comment 'ID',
    username varchar(20) comment '用户英文名或拼音',
    name varchar(20) comment '用户中文名',
    age int comment '年龄',
    gender char comment '性别'
) comment '用户表';
```



| 约束关键字        | 含义                           |      |
| ----------------- | ------------------------------ | ---- |
| not null          | 非空                           |      |
| unique            | 唯一                           |      |
| primary key       | 一行数据的唯一标识，非空且唯一 |      |
| auto_increment    | 自增                           |      |
| default { value } | 指定默认值                     |      |
| foreigh key       | 外键约束                       |      |



| 类型      | 大小(byte) | 有符号(SIGNED)范围                                    | 无符号(UNSIGNED)范围                                       | 描述             | 备注                                               |
| --------- | ---------- | ----------------------------------------------------- | ---------------------------------------------------------- | ---------------- | -------------------------------------------------- |
| tinyint   | 1          | (-128，127)                                           | (0，255)                                                   | 小整数值         |                                                    |
| smallint  | 2          | (-32768，32767)                                       | (0，65535)                                                 | 大整数值         |                                                    |
| mediumint | 3          | (-8388608，8388607)                                   | (0，16777215)                                              | 大整数值         |                                                    |
| int       | 4          | (-2147483648，2147483647)                             | (0，4294967295)                                            | 大整数值         |                                                    |
| bigint    | 8          | (-2^63，2^63-1)                                       | (0，2^64-1)                                                | 极大整数值       |                                                    |
| float     | 4          | (-3.402823466 E+38，3.402823466351  E+38)             | 0 和 (1.175494351  E-38，3.402823466 E+38)                 | 单精度浮点数值   | float(5,2)：5表示整个数字长度，2  表示小数位个数   |
| double    | 8          | (-1.7976931348623157 E+308，1.7976931348623157 E+308) | 0 和  (2.2250738585072014 E-308，1.7976931348623157 E+308) | 双精度浮点数值   | double(5,2)：5表示整个数字长度，2  表示小数位个数  |
| decimal   |            |                                                       |                                                            | 小数值(精度更高) | decimal(5,2)：5表示整个数字长度，2  表示小数位个数 |



| **类型**       | **大小**              | **描述**                                                     |
| -------------- | --------------------- | ------------------------------------------------------------ |
| **char(n)**    | 0-255 bytes           | 定长字符串char(10): 最多只能存10个字符,不足10个字符,占用10个字符空间 |
| **varchar(n)** | 0-65535 bytes         | 变长字符串varchar(10): 最多只能存10个字符,不足10个字符, 按照实际长度存储 |
| tinyblob       | 0-255 bytes           | 不超过255个字符的二进制数据                                  |
| tinytext       | 0-255 bytes           | 短文本字符串                                                 |
| blob           | 0-65 535 bytes        | 二进制形式的长文本数据                                       |
| text           | 0-65 535 bytes        | 长文本数据                                                   |
| mediumblob     | 0-16 777 215 bytes    | 二进制形式的中等长度文本数据                                 |
| mediumtext     | 0-16 777 215 bytes    | 中等长度文本数据                                             |
| longblob       | 0-4 294 967 295 bytes | 二进制形式的极大文本数据                                     |
| longtext       | 0-4 294 967 295 bytes | 极大文本数据                                                 |

| 类型         | 大小(byte) | 范围                                       | 格式                | 描述                     |
| ------------ | ---------- | ------------------------------------------ | ------------------- | ------------------------ |
| **date**     | 3          | 1000-01-01 至  9999-12-31                  | YYYY-MM-DD          | 日期值                   |
| time         | 3          | -838:59:59 至  838:59:59                   | HH:MM:SS            | 时间值或持续时间         |
| year         | 1          | 1901 至 2155                               | YYYY                | 年份值                   |
| **datetime** | 8          | 1000-01-01 00:00:00 至 9999-12-31 23:59:59 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值         |
| timestamp    | 4          | 1970-01-01 00:00:01 至 2038-01-19 03:14:07 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值，时间戳 |



### DML增删改

Manipulation增删改Insert Update Delete



**添加数据**

```mysql
insert into `表名` (字段1[, 字段2]) values (值1[, 值2]) [,(值1,[, 值2])]
```

添加一条数据 `insert into 表名(字段1, 字段2) values (值1, 值2)`

全部字段添加一条数据 `insert into 表名 values (值1, 值2)`

添加多条数据 (指定字段) `insert into 表名(字段1，字段2) values (值1, 值2), (值1, 值2)`

全部字段添加多条数据 `insert into 表名 values (值1, 值2), (值1, 值2)`



- 自增主键值可以直接传入null
- 日期类型要加引号
- `now()` 函数获取当前时间 



**修改数据** 

```mysql
update 表名 set `字段名1` = 值1 [, `字段名2` = 值2] [where 字段 = ?];
```

- 修改多个字段用英文逗号隔开



删除数据

```mysql
delete from `表名` [where 条件];
```

- 没有where条件则更新所有
- 如果是InnoDB，删除整表后重启，自增列会从1开始
- 如果是MyISAM，只会从上一个自增列开始



清空数据库表

```mysql
truncate `表名`
```

- 能够重新设置自增列，计数器归零
- 不影响事务

### DQL查询

数据查询语言query

```sql	
select `列1`[,'列2'] from `表名` where
```

`select 字段1,字段2,字段3`

`from 表名`

`where 条件列表`

`group by 分组字段`

`having 分组后条件`

`order by 排序`

`limit 分页`

- 查询所有字段`select * ` 不推荐使用？
- 设置别名 `select 字段1 as 字段1别名 from stu as 学生表`
- 去除重复记录 `select distinct`
- 拼接字符串`select concat('姓名：', studentName) as 新名字 from student`



条件列表中的**运算符**

| 操作符                    | 含义/范围                      | 注意事项或者举例 |
| ------------------------- | ------------------------------ | ---------------- |
| =、>=、<=、               |                                |                  |
| <>、!=                    | 不等于                         |                  |
| &&、and、\|\|、or、!、not | 条件运算符与或非               |                  |
| between  x and y          | [x, y]                         |                  |
| is null / is not null     | 是否为空                       |                  |
| like 占位符               | _匹配单个字符，%匹配任意个字符 | like %涛%        |
| in (x, y, ...)            | 等于 x 或者等于 y              |                  |

```sql	
select 表达式 from `表名`
```



### DCL控制

数据控制语言control，创建数据库用户，控制数据库访问权限

