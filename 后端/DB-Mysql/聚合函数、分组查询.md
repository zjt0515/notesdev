### 聚合函数aggregate function

作用于表的某一列

| 函数  | 功能                     |                                                              |
| ----- | ------------------------ | ------------------------------------------------------------ |
| count | 统计数量，和值的大小无关 | 一般是`count(*)`                                             |
| max   |                          |                                                              |
| min   |                          |                                                              |
| avg   |                          | AVG()函数忽略列值为NULL的行。可以传入一个表达式，结果计算表达式结果集de |
| sum   |                          |                                                              |

> 聚合函数可以放在任何位置，不是必须跟在select后，例如order byzhi'h

```sql
select 聚合函数(字段列表) from 表名;
```

> ！查询max、min等时不能同时查询别的字段，没有意义（聚合函数是对多组值计算后返回一个值）
>
> null值不参与聚合函数的计算
>
> count和max不能连用
>
> 使用聚合函数，通常会与分组结合，
> 例如，不用分组max，统计的是所有人中最大的一个，分组max统计的是某个组中最大的，这个组可能是每个人一个组，也可能是根据别的字段分的组

### Group by

分组之后，查询的字段一般为聚合函数或者分组字段，查询其他字段没有意义?

```sql
select 字段列表 from 表名 [where 分组前条件 ] group by 分组字段名 [having 分组后过滤条件];
```

> where & having
>
> where：分组前过滤，不参与分组
> having：分组后过滤，可以对聚合函数进行判断
> 执行顺序：where > 聚合函数 > having

和聚合函数结合使用
`slect xx,聚合函数（）from .. group by xx`

### 排序order by

 ``` sql
 select 字段列表 from 表名 order by 字段1 排序方式, 字段2 排序方式
 ```

> 排序方式：asc desc，省略默认asc从小到大，具体看题目需求
>
> 很多题目是需要分数更多的
> 同时很多题目会有2个排序标准，例如在...相同的情况下，查询到xxx更小的那个

### 分页

```sql
select 字段列表 from 表名 limit 起始索引, 查询记录数;
```

> 起始索引从0开始，=(查询页码-1) *每页返回的记录数
> 例如，查询记录数=10，起始索引序列为0，10，20……分别对应第1，2，3……页



>  特殊用法：默认显示第一页的话，可以省略起始索引
>
> 技巧：排序后通过分页只查第一行`select...limit 1`

## 正则

### MySQL正则表达式

```Mysql	
WHERE name REGEXP '.000'
```

| 正则表达式符号     |                              | 逻辑 |
| ------------------ | ---------------------------- | ---- |
| .                  | 匹配任意一个字符             |      |
| \|                 | 两个串之一                   | 或   |
| [123]              | 匹配1或2或3                  | 或   |
| [^123]             | 不匹配1、2、3                | 排除 |
| [0-9]、[a-z]       | 匹配 0-9的数字、a-z的字母    | 范围 |
| \ \ .              | 前导符号、匹配特殊字符       |      |
| \ \ f {n、r、t、v} | 换页 换行 回车 制表 纵向制表 |      |
|                    |                              |      |

| 字符类 | 说明 |      |
| ------ | ---- | ---- |
| [::]   |      |      |
| [::]   |      |      |
| [::]   |      |      |
| [::]   |      |      |
| [::]   |      |      |
| [::]   |      |      |
| [::]   |      |      |

| 重复元字符 | 说明                 |                             |
| ---------- | -------------------- | --------------------------- |
| *          | 0个或多个匹配        | 匹配的对象是前面的1个字符？ |
| +          | 1个或多个匹配        |                             |
| ?          | 0个或1个匹配         |                             |
| {n}        | 指定匹配数           | [0-9]{4} 、[[:digiit:]]{4}  |
| {n,}       | 不少于指定个数的匹配 |                             |
| {n,m}      | 范围匹配             |                             |
|            |                      |                             |

| 定位元字符 | 说明     | 示例 |
| ---------- | -------- | ---- |
| ^          | 文本开始 |      |
| $          | 文本结尾 |      |
| `[[:<:]]`  | 词的开始 |      |
| `[[:>:]]`  | 词的结尾 |      |
|            |          |      |
|            |          |      |
|            |          |      |



- REGEXP匹配列值的子串即可，而LIKE需要匹配整个列满足
- MySQL中的正则表达式匹配不区分大小写，区分大小写需加上BINARY
- 