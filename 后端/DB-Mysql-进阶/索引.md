# 索引index

有序的数据结构，提高查询效率，指向数据

但会降低更新表（增删改）的速度



## 索引结构

| 索引结构  |                              | 存储引擎支持      |
| --------- | ---------------------------- | ----------------- |
| B+Tree    | 最常见                       | 都支持            |
| Hash      | 不支持范围查询               | Memory            |
| R-Tree    | 主要用于地理空间数据         | MyISAM            |
| Full-Text | 通过建立倒排索引快速匹配文档 | InnoDB5.6、MyISAM |

### BTree（多路平衡查找树

以5阶Btree为例，每个节点最多有5个孩子，每个节点最多存储4个key，5个指针

当一个节点插入了5个k ey后，中间元素向上分裂，同时有产生2个子节点

![image-20240422112414029](./images/image-20240422112414029.png)

### B+Tree

以5阶B+Tree为例，

所有元素都会出现在叶子节点，并且形成一张从小到大的单向链表
非叶子节点起到索引作用，叶子节点起到存放数据作用

中间元素向上分裂的同时，在叶子节点上也会出现

![image-20240422112903758](./images/image-20240422112903758.png)

Mysql的B+Tree，在原来的基础上，增加了一个指向相邻叶子结点的链表指针

![image-20240422113022500](./images/image-20240422113022500.png)

## 索引分类

| 分类     | 含义               | 特点                   | 关键字   |
| -------- | ------------------ | ---------------------- | -------- |
| 主键索引 | 针对主键创建的索引 | 默认自动创建，只有一个 | PRIMARY  |
| 唯一索引 | 避免某列的值重复   | 可以有多个             | UNIQUE   |
| 常规索引 | 快速定位特定数据   | 可以有多个             |          |
| 全文索引 |                    | 可以有多个             | FULLTEXT |



## 索引语法

## SQL性能分析

## 索引使用

## 索引设计原则

## 试题

> B+树相对于二叉树，层级更少，搜索效率更高，双向链表便于范围查找

> B+树相对于B树，一页中存储的键值更多，
>
> （B树 每个节点都会保存数据，而每个节点都是单独保存在一个页中的，导致一页中存储的键值减少，指针也减少，树的高度随之增加

> 相对于hash
> B+树支持范围匹配和排序操作