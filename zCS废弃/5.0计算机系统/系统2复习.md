# 处理器体系结构

# 存储

## RAM

> 记忆单元cell
> 存储体：记忆单元构成的存储阵列

| ram  | 每位晶体管数 | 相对访问时间 | 持续性 | 敏感性 | 相对话费 | 用途  |
| ---- | ------------ | ------------ | ------ | ------ | -------- | ----- |
| SRAM | 6            | 1x           | 是     | 否     | 1000x    | cache |
| DRAM | 1            | 10x          | 否     | 是     | 1x       | mm    |

## 磁盘

> 柱面号=磁道号
> 盘面号=磁头号
>
> 磁盘数据地址：柱面号+盘面号+扇区号

### 磁盘访问时间计算

> [!tip]
>
> 扇区访问时间=平均寻道时间+平均旋转等待时间+数据传输时间
>
> 1. 平均寻道时间：磁头到指定磁道的平均时间
> 2. 平均旋转等待时间：指定扇区旋转到磁头下方的平均时间
>    $T=0.5*60*1000/RPM$
> 3. 数据传送时间：
>    $T=一个扇区的字节数(B)/传输速率(B/s)$
>    $T=旋转一个扇区的时间=60/RPM/平均扇区数$

> [!ques]
>
> 每个扇区512B，磁盘转速5400 RPM，平均寻道时间12ms，数据传输速率4MB/s，求磁盘扇区访问时间
>
> [!ans]
>
> drt=12ms + 0.5*60 *1000/5400 + 512 / 4000



> [!ques]
>
> 磁盘组有6片磁盘，每片有2个记录面，最上最下2个面不用
> 存储区域内径22cm，外径33cm，道密度40/cm，内层位密度400位/cm，转速6000转/min
>
> 1. 求柱面数量
> 2. 求总存储容量
> 3. 求数据传输率
>
> [!ans]
>
> 1. (33-22)/2 * 40 = 220
> 2. 400* 2 *3.14 *11 *220 * (6*2-2)

> [!tip]
> $$
> 柱面数量=(外径-内径)/2 * 道密度\\
> 总存储容量=记录面数量*柱面数量*内层位密度*内层磁道周长\\
> 数据传输率D_r(B/s)=rN=磁盘转速(转/s)*每条磁道容量
> $$

## 访存局限

## Cache映射

### 替换算法

## 逻辑地址和物理地址

> 虚拟地址：程序中指令所用的地址，进程所在的地址空间
>
> 一般是32位/64位虚拟地址空间
>
> 物理地址：存放数据指令的实际主存地址
>
> 页表：虚拟页→物理页
> 快表：把经常要查的页表项放入cache

### 一个简化的存储系统举例

# 异常控制流

